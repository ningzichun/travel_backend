该文件夹为用户管理应用程序。

views.py: 用户请求处理
urls.py: URL重写
models.py: 相关数据库模型
admin.py: 管理员配置

用户认证
验证码
接口地址：/user/captcha
请求方式：GET
说明：用户提交注册登录以及重置密码前，需要获取验证码。验证码只能使用一次，刷新验证码即重新获取
返回内容：image/png，cookie

登录
接口地址：/user/login
请求方式：POST
请求参数：
| 名称                                    | 类型   | 必填 | 说明                    |
| --------------------------------------- | ------ | ---- | ----------------------- |
| (user)或(uid,uname,phone,email)其中一项 | string | 是   | 传入user则自动判断类型  |
| password                                | string | 是   | 用户密码                |
| captcha                                 | string | 是   | 验证码                  |
返回参数：
| HTTP状态码 | 返回json中，msg的值                                          | 说明                                |
| ---------- | ------------------------------------------------------------ | ----------------------------------- |
| 200        | 登录成功                                                     | 在cookie中返回session，存储登录信息 |
| 403        | 请使用 POST 请求\|无效参数\|无此用户\|密码错误\|请输入验证码\|验证码过期\|验证码错误 |                                     |
| 500        | 服务器错误                                                   | 下同                                |
登录成功时，返回json信息
| 名称   | 说明                                      |
| ------ | ----------------------------------------- |
| uid    | 用户ID                                    |
| uname  | 用户名                                    |
| phone  | 手机号                                    |
| email  | 邮箱                                      |
| gender | 0未设置 1男 2女                           |
| intro  | 个人介绍                                  |
| avatar | 用户头像文件相对于根目录的地址，或完整url |

登出
接口地址：/user/logout
请求参数：从session中获取用户信息

注册
接口地址：/user/register
请求方式：POST
请求参数：
| 名称         | 类型   | 必填 | 说明                                     |
| ------------ | ------ | ---- | ---------------------------------------- |
| uname        | string | 是   | 用户名                                   |
| phone或email | string | 是   | 手机或邮箱至少一项                       |
| password     | string | 是   | 用户密码                                 |

修改密码
接口地址：/user/password
请求方式：POST
请求参数：
| 名称         | 类型   | 必填 | 说明   |
| ------------ | ------ | ---- | ------ |
| old_password | string | 是   | 旧密码 |
| new_password | string | 是   | 新密码 |

上传头像
接口地址：/user/avatar
请求方式：POST
请求参数：
| 名称   | 类型 | 必填 | 说明             |
| ------ | ---- | ---- | ---------------- |
| avatar | file | 是   | 用户要求的新头像 |

用户信息
接口地址：/user/info
请求方式：GET，查询用户信息
请求方式：POST，修改用户信息
请求参数：
| 名称   | 类型   | 必填 | 说明             |
| ------ | ------ | ---- | ---------------- |
| gender | string | 否   | 要修改的性别     |
| phone  | string | 否   | 要修改的手机号   |
| email  | string | 否   | 要修改的邮箱     |
| intro  | string | 否   | 要修改的个人介绍 |
返回参数：
| 名称   | 说明                                      |
| ------ | ----------------------------------------- |
| uid    | 用户ID                                    |
| uname  | 用户名                                    |
| phone  | 手机号                                    |
| email  | 邮箱                                      |
| gender | 0未设置 1男 2女                           |
| intro  | 个人介绍                                  |
| avatar | 用户头像文件相对于根目录的地址，或完整url |

邮件找回密码
接口地址：/user/reset
请求方式：POST
第一次请求：
| 名称         | 类型   | 必填 | 说明                    |
| ------------ | ------ | ---- | ----------------------- |
| email或phone | string | 是   | 恢复凭证                |
| captcha      | string | 是   | 验证码                  |
| no_captcha   | bool   | 否   | 是否关闭验证码（debug） |
返回参数：
| HTTP状态码 | 返回json中，msg的值                                | 说明                                                    |
| ---------- | -------------------------------------------------- | ------------------------------------------------------- |
| 200        | 已发送恢复码至邮箱\|已发送恢复码至手机             |                                                         |
| 403        | 验证码错误\|找不到用户\|发送邮件失败\|发送短信失败 | 输入错误会使CAPTCHA失效；发送邮件失败时，返回错误类型。 |
第二次及以后的请求：
| 名称         | 类型   | 必填 | 说明                     |
| ------------ | ------ | ---- | ------------------------ |
| code         | string | 是   | 向密保方式中发送的恢复码 |
| captcha      | string | 是   | 验证码                   |
| new_password | string | 是   | 新密码                   |
返回参数：
| HTTP状态码 | 返回json中，msg的值                                    | 说明                    |
| ---------- | ------------------------------------------------------ | ----------------------- |
| 200        | 修改成功                                               |                         |
| 403        | 验证码错误\|未获取恢复码或已失效\|恢复码错误\|参数错误 | 输入错误会使CAPTCHA失效 |

